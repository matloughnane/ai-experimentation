module.exports=[918622,(e,t,r)=>{t.exports=e.x("next/dist/compiled/next-server/app-page-turbo.runtime.prod.js",()=>require("next/dist/compiled/next-server/app-page-turbo.runtime.prod.js"))},556704,(e,t,r)=>{t.exports=e.x("next/dist/server/app-render/work-async-storage.external.js",()=>require("next/dist/server/app-render/work-async-storage.external.js"))},832319,(e,t,r)=>{t.exports=e.x("next/dist/server/app-render/work-unit-async-storage.external.js",()=>require("next/dist/server/app-render/work-unit-async-storage.external.js"))},193695,(e,t,r)=>{t.exports=e.x("next/dist/shared/lib/no-fallback-error.external.js",()=>require("next/dist/shared/lib/no-fallback-error.external.js"))},814747,(e,t,r)=>{t.exports=e.x("path",()=>require("path"))},522734,(e,t,r)=>{t.exports=e.x("fs",()=>require("fs"))},446786,(e,t,r)=>{t.exports=e.x("os",()=>require("os"))},291447,(e,t,r)=>{"use strict";var s=Object.defineProperty,i=Object.getOwnPropertyDescriptor,a=Object.getOwnPropertyNames,o=Object.prototype.hasOwnProperty,n={},l={VercelOidcTokenError:()=>h};for(var c in l)s(n,c,{get:l[c],enumerable:!0});t.exports=((e,t,r,n)=>{if(t&&"object"==typeof t||"function"==typeof t)for(let l of a(t))o.call(e,l)||l===r||s(e,l,{get:()=>t[l],enumerable:!(n=i(t,l))||n.enumerable});return e})(s({},"__esModule",{value:!0}),n);class h extends Error{constructor(e,t){super(e),this.name="VercelOidcTokenError",this.cause=t}toString(){return this.cause?`${this.name}: ${this.message}: ${this.cause}`:`${this.name}: ${this.message}`}}},639060,637349,e=>{"use strict";let t;var r=Object.create,s=Object.defineProperty,i=Object.getOwnPropertyDescriptor,a=Object.getOwnPropertyNames,o=Object.getPrototypeOf,n=Object.prototype.hasOwnProperty,l=e.z,c=(e,t)=>function(){return t||(0,e[a(e)[0]])((t={exports:{}}).exports,t),t.exports},h=(e,t,l)=>(l=null!=e?r(o(e)):{},((e,t,r,o)=>{if(t&&"object"==typeof t||"function"==typeof t)for(let l of a(t))n.call(e,l)||l===r||s(e,l,{get:()=>t[l],enumerable:!(o=i(t,l))||o.enumerable});return e})(!t&&e&&e.__esModule?l:s(l,"default",{value:e,enumerable:!0}),e));e.s(["__commonJS",()=>c,"__require",()=>l,"__toESM",()=>h],637349);var p=Object.create,u=Object.defineProperty,d=Object.getOwnPropertyDescriptor,g=Object.getOwnPropertyNames,m=Object.getPrototypeOf,f=Object.prototype.hasOwnProperty,E=(t=function(e){if(void 0!==l)return l.apply(this,arguments);throw Error('Dynamic require of "'+e+'" is not supported')},void 0!==l?l:"u">typeof Proxy?new Proxy(t,{get:(e,t)=>(void 0!==l?l:e)[t]}):t),T=(e,t)=>function(){return t||(0,e[g(e)[0]])((t={exports:{}}).exports,t),t.exports},y=(e,t,r)=>(r=null!=e?p(m(e)):{},((e,t,r,s)=>{if(t&&"object"==typeof t||"function"==typeof t)for(let i of g(t))f.call(e,i)||i===r||u(e,i,{get:()=>t[i],enumerable:!(s=d(t,i))||s.enumerable});return e})(!t&&e&&e.__esModule?r:u(r,"default",{value:e,enumerable:!0}),e)),O=T({"../../../node_modules/.pnpm/@vercel+oidc@3.0.5/node_modules/@vercel/oidc/dist/token-error.js"(e,t){var r=Object.defineProperty,s=Object.getOwnPropertyDescriptor,i=Object.getOwnPropertyNames,a=Object.prototype.hasOwnProperty,o={},n={VercelOidcTokenError:()=>c};for(var l in n)r(o,l,{get:n[l],enumerable:!0});t.exports=((e,t,o,n)=>{if(t&&"object"==typeof t||"function"==typeof t)for(let l of i(t))a.call(e,l)||l===o||r(e,l,{get:()=>t[l],enumerable:!(n=s(t,l))||n.enumerable});return e})(r({},"__esModule",{value:!0}),o);var c=class extends Error{constructor(e,t){super(e),this.name="VercelOidcTokenError",this.cause=t}toString(){return this.cause?`${this.name}: ${this.message}: ${this.cause}`:`${this.name}: ${this.message}`}}}});e.s(["__commonJS",()=>T,"__require",()=>E,"__toESM",()=>y,"require_token_error",()=>O],639060)},254799,(e,t,r)=>{t.exports=e.x("crypto",()=>require("crypto"))},183055,(e,t,r)=>{let s="object"==typeof performance&&performance&&"function"==typeof performance.now?performance:Date,i=()=>s.now(),a=e=>e===1/0||e&&e===Math.floor(e)&&e>0&&isFinite(e);class o{constructor({max:e=1/0,ttl:t,updateAgeOnGet:r=!1,checkAgeOnGet:s=!1,noUpdateTTL:i=!1,dispose:o,noDisposeOnSet:n=!1}={}){if(this.expirations=Object.create(null),this.data=new Map,this.expirationMap=new Map,void 0!==t&&!a(t))throw TypeError("ttl must be positive integer or Infinity if set");if(!a(e))throw TypeError("max must be positive integer or Infinity");if(this.ttl=t,this.max=e,this.updateAgeOnGet=!!r,this.checkAgeOnGet=!!s,this.noUpdateTTL=!!i,this.noDisposeOnSet=!!n,void 0!==o){if("function"!=typeof o)throw TypeError("dispose must be function if set");this.dispose=o}this.timer=void 0,this.timerExpiration=void 0}setTimer(e,t){if(this.timerExpiration<e)return;this.timer&&clearTimeout(this.timer);let r=setTimeout(()=>{for(let e in this.timer=void 0,this.timerExpiration=void 0,this.purgeStale(),this.expirations){this.setTimer(e,e-i());break}},t);r.unref&&r.unref(),this.timerExpiration=e,this.timer=r}cancelTimer(){this.timer&&(clearTimeout(this.timer),this.timerExpiration=void 0,this.timer=void 0)}cancelTimers(){return process.emitWarning('TTLCache.cancelTimers has been renamed to TTLCache.cancelTimer (no "s"), and will be removed in the next major version update'),this.cancelTimer()}clear(){let e=this.dispose!==o.prototype.dispose?[...this]:[];for(let[t,r]of(this.data.clear(),this.expirationMap.clear(),this.cancelTimer(),this.expirations=Object.create(null),e))this.dispose(r,t,"delete")}setTTL(e,t=this.ttl){let r=this.expirationMap.get(e);if(void 0!==r){let t=this.expirations[r];!t||t.length<=1?delete this.expirations[r]:this.expirations[r]=t.filter(t=>t!==e)}if(t!==1/0){let r=Math.floor(i()+t);this.expirationMap.set(e,r),this.expirations[r]||(this.expirations[r]=[],this.setTimer(r,t)),this.expirations[r].push(e)}else this.expirationMap.set(e,1/0)}set(e,t,{ttl:r=this.ttl,noUpdateTTL:s=this.noUpdateTTL,noDisposeOnSet:i=this.noDisposeOnSet}={}){if(!a(r))throw TypeError("ttl must be positive integer or Infinity");if(this.expirationMap.has(e)){s||this.setTTL(e,r);let a=this.data.get(e);a!==t&&(this.data.set(e,t),i||this.dispose(a,e,"set"))}else this.setTTL(e,r),this.data.set(e,t);for(;this.size>this.max;)this.purgeToCapacity();return this}has(e){return this.data.has(e)}getRemainingTTL(e){let t=this.expirationMap.get(e);return t===1/0?t:void 0!==t?Math.max(0,Math.ceil(t-i())):0}get(e,{updateAgeOnGet:t=this.updateAgeOnGet,ttl:r=this.ttl,checkAgeOnGet:s=this.checkAgeOnGet}={}){let i=this.data.get(e);return s&&0===this.getRemainingTTL(e)?void this.delete(e):(t&&this.setTTL(e,r),i)}dispose(e,t){}delete(e){let t=this.expirationMap.get(e);if(void 0!==t){let r=this.data.get(e);this.data.delete(e),this.expirationMap.delete(e);let s=this.expirations[t];return s&&(s.length<=1?delete this.expirations[t]:this.expirations[t]=s.filter(t=>t!==e)),this.dispose(r,e,"delete"),0===this.size&&this.cancelTimer(),!0}return!1}purgeToCapacity(){for(let e in this.expirations){let t=this.expirations[e];if(this.size-t.length>=this.max){delete this.expirations[e];let r=[];for(let e of t)r.push([e,this.data.get(e)]),this.data.delete(e),this.expirationMap.delete(e);for(let[e,t]of r)this.dispose(t,e,"evict")}else{let e=this.size-this.max,r=[];for(let s of t.splice(0,e))r.push([s,this.data.get(s)]),this.data.delete(s),this.expirationMap.delete(s);for(let[e,t]of r)this.dispose(t,e,"evict");return}}}get size(){return this.data.size}purgeStale(){let e=Math.ceil(i());for(let t in this.expirations){if("Infinity"===t||t>e)return;let r=[...this.expirations[t]||[]],s=[];for(let e of(delete this.expirations[t],r))s.push([e,this.data.get(e)]),this.data.delete(e),this.expirationMap.delete(e);for(let[e,t]of s)this.dispose(t,e,"stale")}0===this.size&&this.cancelTimer()}*entries(){for(let e in this.expirations)for(let t of this.expirations[e])yield[t,this.data.get(t)]}*keys(){for(let e in this.expirations)for(let t of this.expirations[e])yield t}*values(){for(let e in this.expirations)for(let t of this.expirations[e])yield this.data.get(t)}[Symbol.iterator](){return this.entries()}}t.exports=o},10519,127511,185249,782192,665778,e=>{"use strict";var t,r,s=e.i(759555);function i(e,t={}){let r,s={fallbackMessage:"Unknown error",maxDepth:5,supportSerialization:!0,serializeStack:!0},o=t?{...s,...t}:s,{fallbackMessage:n,maxDepth:l,supportSerialization:c,serializeStack:h}=o;if(e&&e instanceof Error)return c&&a(e,h,{maxDepth:l}),e;if(e&&"object"==typeof e){let t=e&&"message"in e&&"string"==typeof e.message?e.message:function(e){if("object"!=typeof e||null===e)return String(e);try{let t=JSON.stringify(e);if("{}"===t)return String(e);return t}catch{return String(e)}}(e),s="cause"in e&&void 0!==e.cause?e.cause instanceof Error?e.cause:l>0?i(e.cause,{...o,maxDepth:l-1}):void 0:void 0;Object.assign(r=Error(t,s?{cause:s}:void 0),e),r.stack="stack"in e&&"string"==typeof e.stack?e.stack:void 0}else e&&"string"==typeof e?(r=Error(e)).stack=void 0:r=Error(n);return c&&a(r,h,{maxDepth:l}),r}function a(e,t=!0,r){let s=r?.maxDepth??5,i=r?.currentDepth??0;e.toJSON||(e.cause instanceof Error&&i<s&&a(e.cause,t,{maxDepth:s,currentDepth:i+1}),Object.defineProperty(e,"toJSON",{value:function(){let e={message:this.message,name:this.name};for(let r in t&&void 0!==this.stack&&(e.stack=this.stack),void 0!==this.cause&&(this.cause instanceof Error&&"toJSON"in this.cause&&"function"==typeof this.cause.toJSON?e.cause=this.cause.toJSON():e.cause=this.cause),this)!this.hasOwnProperty(r)||r in e||"toJSON"===r||(e[r]=this[r]);return e},enumerable:!1,writable:!0,configurable:!0}))}var o=((t=o||{}).TOOL="TOOL",t.AGENT="AGENT",t.MCP="MCP",t.AGENT_NETWORK="AGENT_NETWORK",t.MASTRA_SERVER="MASTRA_SERVER",t.MASTRA_OBSERVABILITY="MASTRA_OBSERVABILITY",t.MASTRA_WORKFLOW="MASTRA_WORKFLOW",t.MASTRA_VOICE="MASTRA_VOICE",t.MASTRA_VECTOR="MASTRA_VECTOR",t.MASTRA_MEMORY="MASTRA_MEMORY",t.LLM="LLM",t.EVAL="EVAL",t.SCORER="SCORER",t.A2A="A2A",t.MASTRA_INSTANCE="MASTRA_INSTANCE",t.MASTRA="MASTRA",t.DEPLOYER="DEPLOYER",t.STORAGE="STORAGE",t.MODEL_ROUTER="MODEL_ROUTER",t),n=((r=n||{}).UNKNOWN="UNKNOWN",r.USER="USER",r.SYSTEM="SYSTEM",r.THIRD_PARTY="THIRD_PARTY",r),l=class extends Error{id;domain;category;details={};message;cause;constructor(e,t){const r=t?i(t,{serializeStack:!1,fallbackMessage:"Unknown error"}):void 0,s=e.text??r?.message??"Unknown error";super(s,{cause:r}),this.id=e.id,this.domain=e.domain,this.category=e.category,this.details=e.details??{},this.message=s,this.cause=r,Object.setPrototypeOf(this,new.target.prototype)}toJSONDetails(){return{message:this.message,domain:this.domain,category:this.category,details:this.details}}toJSON(){return{message:this.message,domain:this.domain,category:this.category,code:this.id,details:this.details,cause:this.cause?.toJSON?.()}}toString(){return JSON.stringify(this.toJSON())}},c=class extends l{};e.s(["MastraError",()=>c,"getErrorFromUnknown",()=>i],127511);var h={AGENT:"AGENT",OBSERVABILITY:"OBSERVABILITY",AUTH:"AUTH",NETWORK:"NETWORK",WORKFLOW:"WORKFLOW",LLM:"LLM",TTS:"TTS",VOICE:"VOICE",VECTOR:"VECTOR",BUNDLER:"BUNDLER",DEPLOYER:"DEPLOYER",MEMORY:"MEMORY",STORAGE:"STORAGE",EMBEDDINGS:"EMBEDDINGS",MCP_SERVER:"MCP_SERVER",SERVER_CACHE:"SERVER_CACHE",SERVER:"SERVER"},p="debug",u="info",d="warn",g="error",m=class{name;level;transports;constructor(e={}){this.name=e.name||"Mastra",this.level=e.level||g,this.transports=new Map(Object.entries(e.transports||{}))}getTransports(){return this.transports}trackException(e){}async listLogs(e,t){return e&&this.transports.has(e)?this.transports.get(e).listLogs(t)??{logs:[],total:0,page:t?.page??1,perPage:t?.perPage??100,hasMore:!1}:{logs:[],total:0,page:t?.page??1,perPage:t?.perPage??100,hasMore:!1}}async listLogsByRunId({transportId:e,runId:t,fromDate:r,toDate:s,logLevel:i,filters:a,page:o,perPage:n}){return e&&this.transports.has(e)&&t?this.transports.get(e).listLogsByRunId({runId:t,fromDate:r,toDate:s,logLevel:i,filters:a,page:o,perPage:n})??{logs:[],total:0,page:o??1,perPage:n??100,hasMore:!1}:{logs:[],total:0,page:o??1,perPage:n??100,hasMore:!1}}},f=class extends m{constructor(e={}){super(e)}debug(e,...t){this.level===p&&console.info(e,...t)}info(e,...t){(this.level===u||this.level===p)&&console.info(e,...t)}warn(e,...t){(this.level===d||this.level===u||this.level===p)&&console.info(e,...t)}error(e,...t){(this.level===g||this.level===d||this.level===u||this.level===p)&&console.error(e,...t)}async listLogs(e,t){return{logs:[],total:0,page:t?.page??1,perPage:t?.perPage??100,hasMore:!1}}async listLogsByRunId(e){return{logs:[],total:0,page:e.page??1,perPage:e.perPage??100,hasMore:!1}}};e.s(["ConsoleLogger",()=>f,"RegisteredLogger",()=>h],185249);var E=class{component=h.LLM;logger;name;constructor({component:e,name:t}){this.component=e||h.LLM,this.name=t,this.logger=new f({name:`${this.component} - ${this.name}`})}__setLogger(e){this.logger=e,this.component!==h.LLM&&this.logger.debug(`Logger updated [component=${this.component}] [name=${this.name}]`)}};e.s(["MastraBase",()=>E],782192);var T=e.i(183055),y=class extends E{constructor({name:e}){super({component:"SERVER_CACHE",name:e})}},O=class extends y{cache=new T.default({max:1e3,ttl:3e5});constructor(){super({name:"InMemoryServerCache"})}async get(e){return this.cache.get(e)}async set(e,t){this.cache.set(e,t)}async listLength(e){let t=this.cache.get(e);if(!Array.isArray(t))throw Error(`${e} is not an array`);return t.length}async listPush(e,t){let r=this.cache.get(e);Array.isArray(r)?r.push(t):this.cache.set(e,[t])}async listFromTo(e,t,r=-1){let s=this.cache.get(e);return Array.isArray(s)?s.slice(t,-1===r?void 0:r+1):[]}async delete(e){this.cache.delete(e)}async clear(){this.cache.clear()}};e.s(["InMemoryServerCache",()=>O],665778);var _=class extends s.MastraModelGateway{id="netlify";name="Netlify AI Gateway";tokenCache=new O;async fetchProviders(){let e=await fetch("https://api.netlify.com/api/v1/ai-gateway/providers");if(!e.ok)throw Error(`Failed to fetch from Netlify: ${e.statusText}`);let t=await e.json(),r={apiKeyEnvVar:["NETLIFY_TOKEN","NETLIFY_SITE_ID"],apiKeyHeader:"Authorization",name:"Netlify",gateway:"netlify",models:[],docUrl:"https://docs.netlify.com/build/ai-gateway/overview/"};for(let[e,s]of Object.entries(t.providers))for(let t of s.models)r.models.push(`${e}/${t}`);return{netlify:r}}async buildUrl(e,t){let r=t?.NETLIFY_SITE_ID||process.env.NETLIFY_SITE_ID,s=t?.NETLIFY_TOKEN||process.env.NETLIFY_TOKEN;if(!s)throw new c({id:"NETLIFY_GATEWAY_NO_TOKEN",domain:"LLM",category:"UNKNOWN",text:`Missing NETLIFY_TOKEN environment variable required for model: ${e}`});if(!r)throw new c({id:"NETLIFY_GATEWAY_NO_SITE_ID",domain:"LLM",category:"UNKNOWN",text:`Missing NETLIFY_SITE_ID environment variable required for model: ${e}`});try{let e=await this.getOrFetchToken(r,s);return e.url.endsWith("/")?e.url.substring(0,e.url.length-1):e.url}catch(t){throw new c({id:"NETLIFY_GATEWAY_TOKEN_ERROR",domain:"LLM",category:"UNKNOWN",text:`Failed to get Netlify AI Gateway token for model ${e}: ${t instanceof Error?t.message:String(t)}`})}}async getOrFetchToken(e,t){let r=`netlify-token:${e}:${t}`,s=await this.tokenCache.get(r);if(s&&s.expiresAt>Date.now()/1e3+60)return{token:s.token,url:s.url};let i=await fetch(`https://api.netlify.com/api/v1/sites/${e}/ai-gateway/token`,{method:"GET",headers:{Authorization:`Bearer ${t}`}});if(!i.ok){let e=await i.text();throw Error(`Failed to get Netlify AI Gateway token: ${i.status} ${e}`)}let a=await i.json();return await this.tokenCache.set(r,{token:a.token,url:a.url,expiresAt:a.expires_at}),{token:a.token,url:a.url}}async getApiKey(e){let t=process.env.NETLIFY_SITE_ID,r=process.env.NETLIFY_TOKEN;if(!r)throw new c({id:"NETLIFY_GATEWAY_NO_TOKEN",domain:"LLM",category:"UNKNOWN",text:`Missing NETLIFY_TOKEN environment variable required for model: ${e}`});if(!t)throw new c({id:"NETLIFY_GATEWAY_NO_SITE_ID",domain:"LLM",category:"UNKNOWN",text:`Missing NETLIFY_SITE_ID environment variable required for model: ${e}`});try{return(await this.getOrFetchToken(t,r)).token}catch(t){throw new c({id:"NETLIFY_GATEWAY_TOKEN_ERROR",domain:"LLM",category:"UNKNOWN",text:`Failed to get Netlify AI Gateway token for model ${e}: ${t instanceof Error?t.message:String(t)}`})}}async resolveLanguageModel({modelId:e,providerId:t,apiKey:r,headers:i}){let a=await this.buildUrl(`${t}/${e}`);switch(t){case"openai":return(0,s.createOpenAI)({apiKey:r,baseURL:a,headers:i}).responses(e);case"gemini":return(0,s.createGoogleGenerativeAI)({baseURL:`${a}/v1beta/`,apiKey:r,headers:{"user-agent":"google-genai-sdk/",...i||{}}}).chat(e);case"anthropic":return(0,s.createAnthropic)({apiKey:r,baseURL:`${a}/v1/`,headers:{"anthropic-version":"2023-06-01","user-agent":"anthropic/",...i||{}}})(e);default:return(0,s.createOpenAICompatible)({name:t,apiKey:r,baseURL:a,supportsStructuredOutputs:!0}).chatModel(e)}}};e.s(["NetlifyGateway",()=>_],10519)},741324,e=>{e.v(t=>Promise.all(["server/chunks/87826_@mastra_core_dist_d70a5863._.js"].map(t=>e.l(t))).then(()=>t(368317)))},321766,e=>{e.v(t=>Promise.all(["server/chunks/87826_@mastra_core_dist_088785ba._.js"].map(t=>e.l(t))).then(()=>t(747673)))},147098,e=>{e.v(t=>Promise.all(["server/chunks/cd42b_p-map_index_9e615490.js"].map(t=>e.l(t))).then(()=>t(168361)))},137172,e=>{e.v(t=>Promise.all(["server/chunks/87826_@mastra_core_dist_models-dev-HR6AQ23K_839e9683.js"].map(t=>e.l(t))).then(()=>t(36722)))},782160,e=>{e.v(t=>Promise.all(["server/chunks/87826_@mastra_core_dist_netlify-XLSRB75S_79e9d1da.js"].map(t=>e.l(t))).then(()=>t(94351)))},477724,e=>{e.v(t=>Promise.all(["server/chunks/[root-of-the-server]__804b0ea7._.js"].map(t=>e.l(t))).then(()=>t(134659)))},658637,e=>{e.v(t=>Promise.all(["server/chunks/7a674_p-retry_index_cc6401bf.js"].map(t=>e.l(t))).then(()=>t(607344)))},366722,e=>{e.v(t=>Promise.all(["server/chunks/a7198_@sindresorhus_slugify_index_8bc7b2d7.js"].map(t=>e.l(t))).then(()=>t(700133)))},666263,e=>{e.v(t=>Promise.all(["server/chunks/ac46c_@vercel_oidc_dist_6a73af60._.js"].map(t=>e.l(t))).then(()=>t(771329)))},249241,e=>{e.v(t=>Promise.all(["server/chunks/ac46c_@vercel_oidc_dist_faf89fb6._.js"].map(t=>e.l(t))).then(()=>t(480800)))}];

//# sourceMappingURL=%5Broot-of-the-server%5D__91469158._.js.map